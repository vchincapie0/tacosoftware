<!-- 
Titulo: Formulario de Características Organolépticas de Producto Terminado para procesamiento
Fecha Elaboracion: 28/05/2024 
Elaborado por: Vivian Carolina Hincapie Escobar 

Última actualización: 02/06/2024
 -->

{% extends 'base.html' %}

{% block title %}
    Características Organolépticas
{% endblock title %}

{% block content %}
<div class="container">
    <div class="row">
        <div class="col d-flex justify-content-center">
            <h3 style="color: #FFFF; font-weight: bolder;">CARACTERÍSTICAS ORGANOLÉPTICAS</h3>
        </div>
    </div>
    <div class="row">
        <div class="col d-flex justify-content-center">
            <nav style="--bs-breadcrumb-divider: '>';" aria-label="breadcrumb">
                <ol class="breadcrumb">
                  <li class="breadcrumb-item" style="text-decoration: none; color: #FFFF;">Procesamiento</li>
                  <li class="breadcrumb-item active" aria-current="page"><a href="#" style="text-decoration: none; color: rgb(236, 225, 47, .75); font-weight: bolder;">Características Organolépticas</a></li>
                  <li class="breadcrumb-item" style="text-decoration: none; color: #FFFF;">Empaque y Vacio</li>
                </ol>
              </nav>
        </div>
    </div>

    <div class="d-flex justify-content-center">
        <div class="row">
            <div class="col">
                <form action="" method="post" class="form-control bg-dark text-white" style="--bs-bg-opacity: .5;" id="mainForm">
                    {% csrf_token %}
                    <h5 class="text-center">Producto: {{producto.pt_nombre}}</h5>
                    <h6 class="text-center">Lote: {{producto.pt_lote}}</h6>
                    
                    <div class="row">
                        <div class="col d-flex justify-content-center gap-2">
                            <div class="form-check">
                                <label class="form-check-label" for="id_olor">Olor</label>
                                {{form.olor}}
                            </div>
                            <div class="form-check">
                                <label class="form-check-label" for="id_sabor">Sabor</label>
                                {{form.sabor}}
                            </div>
                            <div class="form-check">
                                <label class="form-check-label" for="id_color">Color</label>
                                {{form.color}}
                            </div>
                            <div class="form-check">
                                <label class="form-check-label" for="id_textura">Textura</label>
                                {{form.textura}}
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-check">
                        <label class="form-check-label" for="id_observaciones">Observaciones</label>
                        {{form.observaciones}}
                    </div>

                    <div class="mt-2 row">
                        <div class="col d-flex justify-content-center">
                            <button type="submit" class="btn btn-success" onclick="confirmSubmission()">Guardar</button>
                        </div>
                    </div>

                </form>
            </div>
        </div>
    </div>
    
        
    </div>

</div>
{% endblock content %}

{% block extrajs %}
<script>
    // Función que se ejecuta cuando la página se carga completamente.
    window.onload = function() {
        // Verifica si el navegador soporta el método replaceState.
        if (window.history.replaceState) {
            // Reemplaza la URL actual en el historial del navegador con la misma URL.
            // Esto evita que el formulario se vuelva a enviar si el usuario actualiza la página.
            window.history.replaceState(null, null, window.location.href);
        }
    }

    // Función que solicita confirmación al usuario y, si se confirma, envía el formulario.
    function confirmSubmission() {
        Swal.fire({
            title: '¿Está seguro de que desea guardar el formulario?',
            icon: 'warning',
            showCancelButton: true,
            confirmButtonText: 'Sí, guardar',
            cancelButtonText: 'Cancelar',
            background: '#343a40',  // Fondo oscuro
            color: '#ffffff'  // Texto blanco
        }).then((result) => {
            if (result.isConfirmed) {
                document.getElementById('mainForm').submit();
            }
        });
    }
</script>
{% endblock extrajs %}
    